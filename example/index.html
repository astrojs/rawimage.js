<html>
<head>
  <script type="text/javascript" src="example/lib/fits.js"></script>
  <script type="text/javascript" src="lib/webfits-gl-0.0.1.js"></script>
  <script type="text/javascript">
  
  // Define callback to be executed after image is received from the server
  function getImage(f) {
    
    // Get first data unit
    var dataunit = f.getDataUnit();
    
    // Asynchronously get pixels representing the image
    dataunit.getFrameAsync(0, createVisualization);
  }
  
  // Define callback for when pixels have been read from file
  function createVisualization(arr, width, height) {
    
    // Get the DOM element
    var el = document.querySelector('#wicked-science-visualization');
    
    // Initialize the WebFITS context with a 600px viewer
    var webfits = new astro.WebFITS.Api(el, 600);
    // webfits.setImage(arr, width, height);
  }
  
  function main() {
    
    // Get pixels from FITS image
    var path = 'example/data/m101.fits';
    var fits = new astro.FITS.File(path, getImage);
    
  }
  </script>
  
  
</head>

<body onload='main()'>
  <h3>Example of Astronomical Image Visualization</h3>
  <div id="wicked-science-visualization"></div>
</body>
</html>